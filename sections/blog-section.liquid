{%- comment -%}
------------------------------------------------------------------------------
	Section: Blog Section (From the Blog)
	Based on Figma design: Frame 1984077977
------------------------------------------------------------------------------
{%- endcomment -%}


{%- style -%}
	.blog-section {
		padding-top: {{- section.settings.offset_top_mobile -}}px;
		padding-bottom: {{- section.settings.offset_bottom_mobile -}}px;
	}

	@media screen and (min-width: 768px) {
		.blog-section {
			padding-top: {{- section.settings.offset_top_desktop -}}px;
			padding-bottom: {{- section.settings.offset_bottom_desktop -}}px;
		}
	}
{%- endstyle -%}

{{- 'blog-section.build.css' | asset_url | stylesheet_tag -}}

{%- assign blog = section.settings.blog -%}
{%- assign label = section.settings.label -%}
{%- assign button_text = section.settings.button_text -%}
{%- assign button_url = section.settings.button_url -%}
{%- if button_url == blank and blog != blank -%}
	{%- assign button_url = blog.url -%}
{%- endif -%}

<section class="blog-section" id="{{- section.id -}}">
	<div class="blog-section__container">
		<div class="blog-section__header">
			{%- if label != blank -%}
				<p class="blog-section__label">{{- label -}}</p>
			{%- endif -%}

			{%- if button_text != blank and button_url != blank -%}
				<a href="{{- button_url -}}" class="blog-section__button">
					{{- button_text -}}
					<svg class="blog-section__button-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M7.5 15L12.5 10L7.5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
					</svg>
				</a>
			{%- endif -%}
		</div>

		<div class="blog-section__cards">
			{%- if blog and blog.articles.size > 0 -%}
				{%- for article in blog.articles limit: 3 -%}
					<article class="blog-section__card">
						{%- if article.image != blank -%}
							<div class="blog-section__card-image-wrapper">
								<a href="{{- article.url -}}" class="blog-section__card-image-link">
									<img
										src="{{- article.image | img_url: '600x400' -}}"
										srcset="{{- article.image | img_url: '600x400' -}} 1x, {{ article.image | img_url: '1200x800' -}} 2x"
										alt="{{- article.image.alt | escape -}}"
										class="blog-section__card-image"
										loading="lazy"
										width="600"
										height="400"
									>
								</a>
							</div>
						{%- else -%}
							<div class="blog-section__card-image-wrapper">
								<a href="{{- article.url -}}" class="blog-section__card-image-link">
									{{- 'image' | placeholder_svg_tag: 'blog-section__card-image' -}}
								</a>
							</div>
						{%- endif -%}

						<div class="blog-section__card-content">
							<h3 class="blog-section__card-title">
								<a href="{{- article.url -}}" class="blog-section__card-title-link">
									{{- article.title -}}
								</a>
							</h3>

							{%- if article.excerpt != blank -%}
								<p class="blog-section__card-description">{{- article.excerpt | strip_html | truncatewords: 30 -}}</p>
							{%- elsif article.content != blank -%}
								<p class="blog-section__card-description">{{- article.content | strip_html | truncatewords: 30 -}}</p>
							{%- endif -%}
						</div>
					</article>
				{%- endfor -%}
			{%- else -%}
				{%- for i in (1..3) -%}
					<article class="blog-section__card">
						<div class="blog-section__card-image-wrapper">
							<a href="#" class="blog-section__card-image-link">
								{{- 'image' | placeholder_svg_tag: 'blog-section__card-image' -}}
							</a>
						</div>
						<div class="blog-section__card-content">
							<h3 class="blog-section__card-title">
								<a href="#" class="blog-section__card-title-link">
									Blog post title {{- i -}}
								</a>
							</h3>
							<p class="blog-section__card-description">
								This is an example blog post description. It provides a brief overview of the article content and encourages readers to click through.
							</p>
						</div>
					</article>
				{%- endfor -%}
			{%- endif -%}
		</div>
	</div>
</section>

{%- schema -%}
{
	"name": "Blog Section",
	"tag": "section",
	"class": "section",
	"disabled_on": {
		"groups": ["header", "footer"]
	},
	"settings": [
		{
			"type": "blog",
			"id": "blog",
			"label": "Blog",
			"info": "Select a blog to display the latest 3 posts"
		},
		{
			"type": "text",
			"id": "label",
			"label": "Label",
			"default": "From the Blog"
		},
		{
			"type": "text",
			"id": "button_text",
			"label": "Button text",
			"default": "View all posts"
		},
		{
			"type": "url",
			"id": "button_url",
			"label": "Button URL",
			"info": "Leave empty to use blog URL"
		},
		{
			"type": "header",
			"content": "Layout"
		},
		{
			"type": "range",
			"id": "offset_top_desktop",
			"min": 0,
			"max": 200,
			"step": 10,
			"unit": "px",
			"label": "Desktop offset top",
			"default": 140
		},
		{
			"type": "range",
			"id": "offset_bottom_desktop",
			"min": 0,
			"max": 200,
			"step": 10,
			"unit": "px",
			"label": "Desktop offset bottom",
			"default": 100
		},
		{
			"type": "range",
			"id": "offset_top_mobile",
			"min": 0,
			"max": 100,
			"step": 10,
			"unit": "px",
			"label": "Mobile offset top",
			"default": 60
		},
		{
			"type": "range",
			"id": "offset_bottom_mobile",
			"min": 0,
			"max": 100,
			"step": 10,
			"unit": "px",
			"label": "Mobile offset bottom",
			"default": 60
		}
	],
	"presets": [
		{
			"name": "Blog Section",
			"settings": {
				"label": "From the Blog",
				"button_text": "View all posts"
			}
		}
	]
}
{%- endschema -%}

